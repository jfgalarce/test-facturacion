# test-facturacion

Breve guía para instalar y ejecutar la aplicación de prueba (entorno de desarrollo, Debian 13).

## Versiones recomendadas para este proyecto
- PHP: 8.4.13
- PostgreSQL (psql): 15.14 (Debian 15.14-1.pgdg13+1)

## Requisitos (Debian 13)
- Apache o Nginx
- PHP 8.x (se recomienda 8.4.13) con extensiones: pdo, pdo_pgsql, json
- PostgreSQL (se probó con la versión 15.14)
- git, curl, unzip (opcional)
- Acceso al directorio del proyecto: `/var/www/html/test-facturacion`

Instalar paquetes mínimos:
```bash
sudo apt update
sudo apt install -y apache2 php php-pgsql php-json php-xml php-mbstring git curl
```

1) Clonar / copiar el proyecto
Si no está en el host, clonar:
```bash
cd /var/www/html
git https://github.com/jfgalarce/test-facturacion
```
Si ya está en `/var/www/html/test-facturacion`, omitir.


2) Instalar paquetes necesarios
```bash
sudo apt update
sudo apt install -y php php-pgsql apache2   # si usas Apache
# o si usas php-fpm (nginx):
# sudo apt install -y php php-pgsql php-fpm
```

3) Reiniciar el servidor web / servicio PHP
```bash
# Apache
sudo systemctl restart apache2

# PHP-FPM (si aplica)
sudo systemctl restart php8.2-fpm   # ajustar versión si es diferente
```

4) Verificar que las extensiones estén cargadas
```bash
php -m | grep -E 'pdo|pdo_pgsql|pgsql'
# o desde PHP en web: crear un phpinfo() y abrirlo en el navegador
```

5) Configurar la conexión en tu proyecto
- Edita `test-facturacion/clases/Database.php` y ajusta host, puerto, dbname, usuario y contraseña:
```php
private $host = 'IP_O_HOST';
private $port = '5432';
private $dbname = 'tu_base';
private $user = 'tu_usuario';
private $pass = 'tu_password';
```
6) Backup de la base de datos
- El respaldo de la base de datos se realizó con pgAdmin 4, el archivo se llama `db_test.sql` y está ubicado en la raíz del proyecto (`test-facturacion/db_test.sql`).

7) Errores comunes
- "Class 'PDO' not found": PHP no tiene la extensión PDO habilitada. Instalar `php` y `php-pgsql`.
- Errores de autenticación/host: verificar credenciales y que PostgreSQL acepte conexiones desde la IP (pg_hba.conf).
- Si usas contenedor con red, asegúrate de que el host en Database.php sea accesible desde el contenedor.